# AI服务环境变量配置示例
# 复制此文件为 .env.ai 并根据实际情况修改配置值

# ===========================================
# AI服务基础配置
# ===========================================

# AI服务端口
AI_SERVICE_PORT=8001

# 向量维度配置
VECTOR_DIMENSION=1024

# AI任务队列名称
AI_QUEUE_NAME=ai_tasks

# ===========================================
# Ollama 本地模型配置
# ===========================================

# Ollama服务地址（本地部署）
OLLAMA_BASE_URL=http://host.docker.internal:11434

# 向量化模型（推荐使用 bge-m3）
OLLAMA_EMBEDDING_MODEL=bge-m3:latest

# 中文处理模型（推荐使用 deepseek-r1:8b）
OLLAMA_CHAT_MODEL=deepseek-r1:8b

# 模型超时设置（秒）
OLLAMA_TIMEOUT=30

# 模型并发限制
OLLAMA_MAX_CONCURRENT=3

# ===========================================
# Azure OpenAI 备用配置
# ===========================================

# Azure OpenAI 端点
AZURE_OPENAI_ENDPOINT=

# Azure OpenAI API密钥
AZURE_OPENAI_API_KEY=

# Azure OpenAI API版本
AZURE_OPENAI_API_VERSION=2024-02-01

# 嵌入模型部署名称
AZURE_EMBEDDING_DEPLOYMENT=text-embedding-ada-002

# 聊天模型部署名称
AZURE_CHAT_DEPLOYMENT=gpt-4

# ===========================================
# 向量数据库配置
# ===========================================

# 向量索引类型 (hnsw, ivfflat)
VECTOR_INDEX_TYPE=hnsw

# HNSW索引参数
HNSW_M=16
HNSW_EF_CONSTRUCTION=64
HNSW_EF_SEARCH=40

# IVFFlat索引参数
IVFFLAT_LISTS=100

# 相似度阈值
SIMILARITY_THRESHOLD=0.7

# 搜索结果限制
MAX_SEARCH_RESULTS=50

# ===========================================
# 文档处理配置
# ===========================================

# 文档分块大小（字符数）
CHUNK_SIZE=500

# 分块重叠大小（字符数）
CHUNK_OVERLAP=50

# 支持的文档类型
SUPPORTED_DOC_TYPES=txt,pdf,docx,md

# 最大文档大小（MB）
MAX_DOCUMENT_SIZE_MB=10

# ===========================================
# 缓存配置
# ===========================================

# 向量缓存TTL（秒）
VECTOR_CACHE_TTL=3600

# 搜索结果缓存TTL（秒）
SEARCH_CACHE_TTL=1800

# 模型缓存TTL（秒）
MODEL_CACHE_TTL=7200

# 缓存键前缀
CACHE_KEY_PREFIX=ai_service

# ===========================================
# 性能配置
# ===========================================

# 批处理大小
BATCH_SIZE=10

# 工作进程数
WORKER_PROCESSES=2

# 异步任务并发数
ASYNC_CONCURRENCY=5

# 请求超时（秒）
REQUEST_TIMEOUT=60

# ===========================================
# 监控和日志配置
# ===========================================

# 日志级别 (DEBUG, INFO, WARNING, ERROR)
AI_LOG_LEVEL=INFO

# 指标收集间隔（秒）
METRICS_INTERVAL=30

# 性能监控开关
ENABLE_PERFORMANCE_MONITORING=true

# 详细日志开关
ENABLE_VERBOSE_LOGGING=false

# ===========================================
# 安全配置
# ===========================================

# API密钥（用于服务间通信）
AI_SERVICE_API_KEY=your-secure-api-key-here

# 允许的来源IP（逗号分隔）
ALLOWED_IPS=127.0.0.1,172.25.0.0/16

# 启用HTTPS
ENABLE_HTTPS=false

# SSL证书路径
SSL_CERT_PATH=/app/ssl/cert.pem
SSL_KEY_PATH=/app/ssl/key.pem

# ===========================================
# 开发和调试配置
# ===========================================

# 开发模式
DEVELOPMENT_MODE=false

# 调试模式
DEBUG_MODE=false

# 模拟模式（使用模拟数据）
MOCK_MODE=false

# 测试数据库URL
TEST_DATABASE_URL=postgresql://postgres:test_password@localhost:5433/test_ai_db

# ===========================================
# 特性开关
# ===========================================

# 启用语义搜索
ENABLE_SEMANTIC_SEARCH=true

# 启用混合搜索
ENABLE_HYBRID_SEARCH=true

# 启用智能问答
ENABLE_INTELLIGENT_QA=true

# 启用多模态搜索
ENABLE_MULTIMODAL_SEARCH=false

# 启用实时向量化
ENABLE_REALTIME_VECTORIZATION=true

# 启用搜索历史记录
ENABLE_SEARCH_HISTORY=true

# 启用自动模型选择
ENABLE_AUTO_MODEL_SELECTION=true