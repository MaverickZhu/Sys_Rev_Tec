# AI服务环境变量配置示例
# 复制此文件为 .env 并根据实际情况修改配置

# =============================================================================
# 服务配置
# =============================================================================
AI_SERVICE_HOST=0.0.0.0
AI_SERVICE_PORT=8001
AI_SERVICE_WORKERS=1
AI_SERVICE_RELOAD=false

# =============================================================================
# 数据库配置
# =============================================================================
# PostgreSQL数据库连接
DATABASE_URL=postgresql://postgres:password@localhost:5432/sys_rev_tec
DATABASE_POOL_SIZE=10
DATABASE_MAX_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30

# =============================================================================
# 缓存配置
# =============================================================================
# Redis缓存连接
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
REDIS_DB=0
CACHE_TTL=3600
CACHE_MAX_CONNECTIONS=10

# =============================================================================
# AI模型配置
# =============================================================================
# Ollama配置
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_TIMEOUT=300
OLLAMA_MAX_RETRIES=3

# 默认嵌入模型
DEFAULT_EMBEDDING_MODEL=nomic-embed-text
DEFAULT_CHAT_MODEL=llama3.1:8b
VECTOR_DIMENSION=768

# Azure OpenAI配置 (可选)
AZURE_OPENAI_ENDPOINT=
AZURE_OPENAI_API_KEY=
AZURE_OPENAI_API_VERSION=2024-02-15-preview
AZURE_OPENAI_EMBEDDING_MODEL=text-embedding-ada-002
AZURE_OPENAI_CHAT_MODEL=gpt-4

# =============================================================================
# 向量数据库配置
# =============================================================================
# 向量数据库类型 (chroma, pinecone, weaviate)
VECTOR_DB_TYPE=chroma

# Chroma配置
CHROMA_HOST=localhost
CHROMA_PORT=8000
CHROMA_COLLECTION_NAME=ai_service_vectors

# Pinecone配置 (如果使用)
PINCONE_API_KEY=
PINCONE_ENVIRONMENT=
PINCONE_INDEX_NAME=ai-service-index

# Weaviate配置 (如果使用)
WEAVIATE_URL=http://localhost:8080
WEAVIATE_API_KEY=

# =============================================================================
# 文本处理配置
# =============================================================================
# 分块配置
DEFAULT_CHUNK_SIZE=512
DEFAULT_CHUNK_OVERLAP=50
MAX_CHUNK_SIZE=2048
MIN_CHUNK_SIZE=100

# 语言检测
DETECT_LANGUAGE=true
SUPPORTED_LANGUAGES=zh,en,ja,ko

# =============================================================================
# 搜索配置
# =============================================================================
# 搜索参数
DEFAULT_SEARCH_LIMIT=10
MAX_SEARCH_LIMIT=100
DEFAULT_SIMILARITY_THRESHOLD=0.7

# 重排序配置
ENABLE_RERANKING=true
RERANK_TOP_K=20
RERANK_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2

# =============================================================================
# 安全配置
# =============================================================================
# API密钥 (如果需要)
API_KEY=
API_KEY_HEADER=X-API-Key

# CORS配置
CORS_ORIGINS=*
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=*

# 信任的主机
TRUSTED_HOSTS=localhost,127.0.0.1,0.0.0.0

# =============================================================================
# 日志配置
# =============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=logs/ai_service.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5
LOG_ROTATION=daily

# 结构化日志
ENABLE_STRUCTURED_LOGGING=true
LOG_REQUEST_BODY=false
LOG_RESPONSE_BODY=false

# =============================================================================
# 监控配置
# =============================================================================
# Prometheus配置
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=8002
PROMETHEUS_PATH=/metrics

# 健康检查
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# 性能配置
# =============================================================================
# 并发配置
MAX_CONCURRENT_REQUESTS=100
REQUEST_TIMEOUT=300
KEEP_ALIVE_TIMEOUT=5

# 批处理配置
BATCH_SIZE=32
MAX_BATCH_SIZE=128
BATCH_TIMEOUT=10

# =============================================================================
# 开发配置
# =============================================================================
# 开发模式
DEVELOPMENT_MODE=false
DEBUG=false
RELOAD=false

# 测试配置
TEST_DATABASE_URL=postgresql://postgres:password@localhost:5432/sys_rev_tec_test
TEST_REDIS_URL=redis://localhost:6379/1

# =============================================================================
# 功能开关
# =============================================================================
# 启用的功能
ENABLE_VECTORIZATION=true
ENABLE_SEARCH=true
ENABLE_QA=true
ENABLE_CACHING=true
ENABLE_METRICS=true

# 实验性功能
ENABLE_EXPERIMENTAL_FEATURES=false
ENABLE_MULTIMODAL=false
ENABLE_REAL_TIME_SEARCH=false

# =============================================================================
# 资源限制
# =============================================================================
# 内存限制
MAX_MEMORY_USAGE=4GB
MAX_VECTOR_CACHE_SIZE=1GB
MAX_TEXT_CACHE_SIZE=512MB

# 文件大小限制
MAX_FILE_SIZE=100MB
MAX_BATCH_FILE_SIZE=500MB

# 请求限制
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW=3600

# =============================================================================
# 备份和恢复
# =============================================================================
# 备份配置
ENABLE_AUTO_BACKUP=false
BACKUP_INTERVAL=24h
BACKUP_RETENTION=7d
BACKUP_LOCATION=/backups

# =============================================================================
# 第三方服务
# =============================================================================
# Elasticsearch (可选)
ELASTICSEARCH_URL=
ELASTICSEARCH_INDEX=ai_service

# Milvus (可选)
MILVUS_HOST=localhost
MILVUS_PORT=19530
MILVUS_COLLECTION=ai_service_vectors

# =============================================================================
# 环境标识
# =============================================================================
ENVIRONMENT=development
SERVICE_NAME=ai-service
SERVICE_VERSION=1.0.0