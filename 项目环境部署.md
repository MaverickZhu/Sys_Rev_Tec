# 政府采购项目审查分析系统环境部署指南

本文档提供了在本地开发环境中设置和运行政府采购项目审查分析系统的详细步骤。系统包含RBAC权限控制、项目管理、文档管理和OCR文字识别等核心功能。

## 1. 先决条件

*   **Python**: 3.8 或更高版本。
*   **Pip**: Python包管理工具。
*   **Git**: 版本控制系统。

## 2. 环境设置

### 2.1. 克隆仓库

```bash
# 使用你的仓库地址
git clone <repository-url>
cd <repository-directory>
```

### 2.2. 创建并激活虚拟环境

为了隔离项目依赖，强烈建议使用虚拟环境。

```bash
# 创建虚拟环境
python -m venv venv

# 激活虚拟环境 (Windows)
.\venv\Scripts\activate

# 激活虚拟环境 (macOS/Linux)
# source venv/bin/activate
```

### 2.3. 安装依赖

所有必需的Python包都列在 `requirements.txt` 文件中。

```bash
pip install -r requirements.txt
```

## 3. 数据库设置

本项目使用 `Alembic` 进行数据库迁移管理，并默认使用 `SQLite` 作为开发数据库。

### 3.1. 应用数据库迁移

首次运行时，需要应用迁移来创建数据库表结构。

```bash
alembic upgrade head
```

此命令会读取 `alembic.ini` 配置和 `alembic/` 目录下的迁移脚本，并在项目根目录下创建或更新 `test.db` 文件。

## 4. 运行应用程序

### 4.1. 启动开发服务器

我们使用 `uvicorn` 来运行FastAPI应用，并开启热重载功能以便于开发。

```bash
uvicorn app.main:app --reload
```

### 4.2. 访问应用程序

服务器成功启动后，你可以在浏览器中访问以下地址：

*   **API文档 (Swagger UI)**: [http://127.0.0.1:8000/docs](http://127.0.0.1:8000/docs)
*   **备选API文档 (ReDoc)**: [http://127.0.0.1:8000/redoc](http://127.0.0.1:8000/redoc)

### 4.3. 系统功能模块

系统启动后，以下功能模块将可用：

*   **用户管理**: 支持用户注册、登录、角色管理和权限控制
*   **项目管理**: 项目创建、审查、状态跟踪和比对分析
*   **文档管理**: 文档上传、分类、版本控制和搜索
*   **OCR识别**: 文档文字识别、结果管理和统计分析
*   **问题跟踪**: 项目问题记录、分配和解决状态管理

### 4.4. 初始数据

首次启动时，系统会自动创建初始数据，包括：

*   默认管理员用户
*   基础角色和权限配置
*   示例项目数据

可以通过以下命令手动初始化数据：

```bash
python app/initial_data.py
```

## 5. 生产环境部署 (参考)

生产环境部署需要更健壮的配置，以下是一个基本示例：

*   **Web服务器**: 使用 `Gunicorn` 作为应用服务器。
*   **数据库**: 推荐使用 `PostgreSQL` 或 `MySQL`。
*   **容器化**: 使用 `Docker` 和 `Docker Compose` 来打包和管理服务。

一个简单的 `Gunicorn` 启动命令如下：

```bash
gunicorn -k uvicorn.workers.UvicornWorker app.main:app
```

详细的生产部署指南将在后续文档中提供。